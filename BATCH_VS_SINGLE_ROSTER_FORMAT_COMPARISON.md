# æ‰¹é‡æ“ä½œ"ç¡®è®¤æ‰§è¡Œ" vs å•ä¸ªæ›´è¡¨"ç¡®è®¤æ›´è¡¨" æ•°æ®æ ¼å¼å¯¹æ¯”

## æ¦‚è¿°
æœ¬æ–‡æ¡£å¯¹æ¯”äº†æ‰¹é‡æ“ä½œä¸­çš„"ç¡®è®¤æ‰§è¡Œ"åŠŸèƒ½å’Œå•ä¸ªæ›´è¡¨ä¿å­˜ä¸­çš„"ç¡®è®¤æ›´è¡¨"åŠŸèƒ½ï¼Œåœ¨æ›´æ–°åç«¯æ•°æ®åº“æ—¶çš„æ•°æ®æ ¼å¼å·®å¼‚ã€‚

## 1. æ‰¹é‡æ“ä½œ"ç¡®è®¤æ‰§è¡Œ"ï¼ˆexecuteBatchWorkï¼‰

### æ•°æ®æ„å»ºä½ç½®
- æ–‡ä»¶ï¼š`Web_app/supervisor-functions.js`
- å‡½æ•°ï¼š`executeBatchWork()`
- è¡Œæ•°ï¼šçº¦ 4504-4535

### entries æ•°ç»„ä¸­çš„å¯¹è±¡æ ¼å¼
```javascript
{
    date: dateStr,           // æ—¥æœŸå­—ç¬¦ä¸² "YYYY-MM-DD"
    slot: 1/2/3,            // æ—¶æ®µç¼–å·
    time: '',                // âš ï¸ æ—¶é—´å­—æ®µï¼ˆå§‹ç»ˆä¸ºç©ºå­—ç¬¦ä¸²ï¼‰
    location: string,        // åœ°ç‚¹å­—ç¬¦ä¸²ï¼ˆå¯èƒ½ä¸ºç©ºï¼‰
    unavailable: false,      // æ˜¯å¦ä¸å¯ç”¨ï¼ˆæ‰¹é‡å·¥ä½œæ“ä½œå§‹ç»ˆä¸º falseï¼‰
    isClicked: false         // æ˜¯å¦è¢«ç‚¹å‡»ï¼ˆæ‰¹é‡å·¥ä½œæ“ä½œå§‹ç»ˆä¸º falseï¼‰
}
```

### è¯·æ±‚ä½“æ ¼å¼ï¼ˆé€šè¿‡ submitBatchRosterï¼‰
```javascript
{
    phone: phone,
    name: employeeName,
    entries: entries,        // ä¸Šè¿°æ ¼å¼çš„æ•°ç»„
    supervisorApproved: true,
    submittedBy: 'supervisor',
    isSubmitted: true,
    isConfirmed: false
}
```

## 2. å•ä¸ªæ›´è¡¨"ç¡®è®¤æ›´è¡¨"ï¼ˆsaveSupervisorRosterï¼‰

### æ•°æ®æ„å»ºä½ç½®
- æ–‡ä»¶ï¼š`Web_app/supervisor-functions.js`
- å‡½æ•°ï¼š`saveSupervisorRoster()`
- è¡Œæ•°ï¼šçº¦ 2156-2207

### entries æ•°ç»„ä¸­çš„å¯¹è±¡æ ¼å¼
```javascript
{
    date: date,              // æ—¥æœŸå­—ç¬¦ä¸² "YYYY-MM-DD"
    location: string,        // åœ°ç‚¹å­—ç¬¦ä¸²ï¼ˆå¯èƒ½ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰
    slot: slot,              // æ—¶æ®µç¼–å· 1/2/3
    isClicked: boolean,      // âš ï¸ æ ¹æ® unavailable çŠ¶æ€åŠ¨æ€è®¾ç½®ï¼ˆtrue/falseï¼‰
    unavailable: boolean     // âš ï¸ æ ¹æ®ç”¨æˆ·æ“ä½œåŠ¨æ€è®¾ç½®ï¼ˆtrue/falseï¼‰
    // âš ï¸ æ³¨æ„ï¼šæ²¡æœ‰ time å­—æ®µ
}
```

### è¯·æ±‚ä½“æ ¼å¼
```javascript
{
    phone: phone,
    name: coachName,
    entries: entries,        // ä¸Šè¿°æ ¼å¼çš„æ•°ç»„
    supervisorApproved: true,
    submittedBy: 'supervisor',
    isSubmitted: true,
    isConfirmed: false
}
```

## 3. ä¸»è¦å·®å¼‚å¯¹æ¯”

| å­—æ®µ | æ‰¹é‡æ“ä½œ"ç¡®è®¤æ‰§è¡Œ" | å•ä¸ªæ›´è¡¨"ç¡®è®¤æ›´è¡¨" | è¯´æ˜ |
|------|------------------|-----------------|------|
| `date` | âœ… æœ‰ | âœ… æœ‰ | ç›¸åŒ |
| `slot` | âœ… æœ‰ | âœ… æœ‰ | ç›¸åŒ |
| `time` | âœ… æœ‰ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ | âœ… æœ‰ï¼ˆç©ºå­—ç¬¦ä¸²ï¼‰ | **âœ… å·²ç»Ÿä¸€ï¼šéƒ½åŒ…å« time å­—æ®µ** |
| `location` | âœ… æœ‰ | âœ… æœ‰ | ç›¸åŒ |
| `unavailable` | âœ… æœ‰ï¼ˆå›ºå®š falseï¼‰ | âœ… æœ‰ï¼ˆåŠ¨æ€ true/falseï¼‰ | **å·®å¼‚1ï¼šæ‰¹é‡æ“ä½œå›ºå®šä¸º false** |
| `isClicked` | âœ… æœ‰ï¼ˆå›ºå®š falseï¼‰ | âœ… æœ‰ï¼ˆåŠ¨æ€ true/falseï¼‰ | **å·®å¼‚2ï¼šæ‰¹é‡æ“ä½œå›ºå®šä¸º false** |

## 4. åç«¯APIå¤„ç†ï¼ˆ/coach-roster/batchï¼‰

### åç«¯ä»£ç ä½ç½®
- æ–‡ä»¶ï¼š`api-server/server.js`
- è·¯ç”±ï¼š`POST /coach-roster/batch`
- è¡Œæ•°ï¼šçº¦ 656-970

### åç«¯å¤„ç†é€»è¾‘
1. **time å­—æ®µå¤„ç†**ï¼š
   - å¦‚æœ entry æœ‰ `time` å­—æ®µï¼Œä½¿ç”¨è¯¥å€¼
   - å¦‚æœ entry æ²¡æœ‰ `time` å­—æ®µï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² `''`
   - åç«¯ä¼šå°† time åˆå¹¶åˆ° `timeArray` æ•°ç»„ä¸­

2. **location å­—æ®µå¤„ç†**ï¼š
   - å¦‚æœ entry æœ‰ `location` å­—æ®µï¼Œä½¿ç”¨è¯¥å€¼
   - å¦‚æœ entry æ²¡æœ‰ `location` å­—æ®µï¼Œè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸² `''`
   - åç«¯ä¼šå°† location åˆå¹¶åˆ° `locationArray` æ•°ç»„ä¸­

3. **unavailable å’Œ isClicked å­—æ®µå¤„ç†**ï¼š
   - å¦‚æœ entry æœ‰è¿™äº›å­—æ®µï¼Œä½¿ç”¨è¯¥å€¼
   - å¦‚æœ entry æ²¡æœ‰è¿™äº›å­—æ®µï¼Œä½¿ç”¨é»˜è®¤å€¼ï¼ˆunavailable: false, isClicked: falseï¼‰

## 5. ç»“è®º

### âœ… å…¼å®¹æ€§
ä¸¤ç§æ ¼å¼**åŸºæœ¬å…¼å®¹**ï¼Œå› ä¸ºï¼š
1. åç«¯APIä¼šå¤„ç†ç¼ºå¤±çš„ `time` å­—æ®µï¼ˆè®¾ç½®ä¸ºç©ºå­—ç¬¦ä¸²ï¼‰
2. åç«¯APIä¼šå¤„ç†æ‰€æœ‰å¿…éœ€å­—æ®µçš„é»˜è®¤å€¼
3. ä¸¤ç§æ ¼å¼éƒ½ä½¿ç”¨ç›¸åŒçš„APIç«¯ç‚¹ `/coach-roster/batch`

### âœ… å·²è§£å†³çš„é—®é¢˜
1. **time å­—æ®µå·²ç»Ÿä¸€**ï¼š
   - æ‰¹é‡æ“ä½œå‘é€ `time: ''`
   - å•ä¸ªæ›´è¡¨ä¿å­˜ä¹Ÿå‘é€ `time: ''`
   - **çŠ¶æ€**ï¼šâœ… å·²ç»Ÿä¸€ï¼Œæ•°æ®æ ¼å¼ä¸€è‡´

### âš ï¸ ä¿ç•™çš„å·®å¼‚ï¼ˆåˆç†çš„ä¸šåŠ¡é€»è¾‘å·®å¼‚ï¼‰
1. **isClicked å’Œ unavailable å­—æ®µé€»è¾‘ä¸åŒ**ï¼š
   - æ‰¹é‡æ“ä½œï¼šå›ºå®šä¸º `false`
   - å•ä¸ªæ›´è¡¨ï¼šæ ¹æ®ç”¨æˆ·æ“ä½œåŠ¨æ€è®¾ç½®
   - **å½±å“**ï¼šè¿™æ˜¯é¢„æœŸçš„è¡Œä¸ºå·®å¼‚ï¼Œå› ä¸ºæ‰¹é‡æ“ä½œæ˜¯è¦†ç›–æ“ä½œ

### ğŸ’¡ å·²å®Œæˆçš„æ”¹è¿›
1. **âœ… ç»Ÿä¸€ time å­—æ®µ**ï¼š
   - å·²ä¿®æ”¹ `supervisor-functions.js` å’Œ `manager-functions.js` ä¸­çš„ä¿å­˜å‡½æ•°
   - ç°åœ¨å•ä¸ªæ›´è¡¨ä¿å­˜ä¹Ÿå‘é€ `time: ''` å­—æ®µ
   - æ•°æ®æ ¼å¼å·²å®Œå…¨ç»Ÿä¸€

### ğŸ’¡ ä¿ç•™çš„ä¸šåŠ¡é€»è¾‘
1. **ä¿æŒç°æœ‰é€»è¾‘**ï¼š
   - `isClicked` å’Œ `unavailable` çš„å·®å¼‚æ˜¯åˆç†çš„ï¼Œå› ä¸ºï¼š
     - æ‰¹é‡æ“ä½œæ˜¯"è¦†ç›–"æ“ä½œï¼Œä¼šé‡ç½®è¿™äº›çŠ¶æ€
     - å•ä¸ªæ›´è¡¨ä¿å­˜æ˜¯"ç¼–è¾‘"æ“ä½œï¼Œéœ€è¦ä¿æŒç”¨æˆ·çš„æ“ä½œçŠ¶æ€

## 6. æ•°æ®ç¤ºä¾‹

### æ‰¹é‡æ“ä½œ"ç¡®è®¤æ‰§è¡Œ"ç¤ºä¾‹
```json
{
    "phone": "12345678",
    "name": "å¼ ä¸‰",
    "entries": [
        {
            "date": "2025-01-15",
            "slot": 1,
            "time": "",
            "location": "æ¸¸æ³³æ± A",
            "unavailable": false,
            "isClicked": false
        }
    ],
    "supervisorApproved": true,
    "submittedBy": "supervisor",
    "isSubmitted": true,
    "isConfirmed": false
}
```

### å•ä¸ªæ›´è¡¨"ç¡®è®¤æ›´è¡¨"ç¤ºä¾‹ï¼ˆç»Ÿä¸€åï¼‰
```json
{
    "phone": "12345678",
    "name": "å¼ ä¸‰",
    "entries": [
        {
            "date": "2025-01-15",
            "time": "",
            "location": "æ¸¸æ³³æ± A",
            "slot": 1,
            "isClicked": false,
            "unavailable": false
        }
    ],
    "supervisorApproved": true,
    "submittedBy": "supervisor",
    "isSubmitted": true,
    "isConfirmed": false
}
```

## 7. æ›´æ–°æ—¥å¿—

### 2025-01-XX - ç»Ÿä¸€ time å­—æ®µå¤„ç†
- âœ… ä¿®æ”¹ `Web_app/supervisor-functions.js` ä¸­çš„ `saveSupervisorRoster` å‡½æ•°
- âœ… ä¿®æ”¹ `Web_app/manager-functions.js` ä¸­çš„ `saveManagerRoster` å‡½æ•°
- âœ… æ‰€æœ‰ä¿å­˜å‡½æ•°ç°åœ¨éƒ½ç»Ÿä¸€åŒ…å« `time: ''` å­—æ®µ
- âœ… æ•°æ®æ ¼å¼å·²å®Œå…¨ç»Ÿä¸€ï¼Œä¸æ‰¹é‡æ“ä½œä¿æŒä¸€è‡´

