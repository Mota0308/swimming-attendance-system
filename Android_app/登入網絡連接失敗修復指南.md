# ç™»å…¥ç¶²çµ¡é€£æ¥å¤±æ•—ä¿®å¾©æŒ‡å—

## ğŸ” å•é¡Œæè¿°

åœ¨Androidæ‡‰ç”¨ç™»å…¥æ™‚é¡¯ç¤º"ç¶²çµ¡é€£æ¥å¤±æ•—"éŒ¯èª¤ã€‚

## ğŸ¯ å¯èƒ½çš„åŸå› 

### 1. APIæœå‹™å™¨æœªé‹è¡Œ
- Node.jsé€²ç¨‹å·²åœæ­¢
- æœå‹™å™¨å´©æ½°æˆ–ç•°å¸¸é€€å‡º
- ç«¯å£è¢«å…¶ä»–ç¨‹åºä½”ç”¨

### 2. ç«¯å£é…ç½®ä¸åŒ¹é…
- APIæœå‹™å™¨é‹è¡Œåœ¨ç«¯å£3001
- Androidæ‡‰ç”¨ä»é…ç½®ç‚ºç«¯å£3000
- é˜²ç«ç‰†é˜»æ­¢ç«¯å£è¨ªå•

### 3. ç¶²çµ¡é€£æ¥å•é¡Œ
- è¨­å‚™ç„¡æ³•è¨ªå•æœå‹™å™¨IP
- ç¶²çµ¡æ¬Šé™ä¸è¶³
- DNSè§£æå•é¡Œ

## ğŸ”§ è§£æ±ºæ–¹æ¡ˆ

### æ­¥é©Ÿ1: æª¢æŸ¥APIæœå‹™å™¨ç‹€æ…‹

#### 1.1 é‹è¡Œè¨ºæ–·è…³æœ¬
```bash
# åœ¨api-serverç›®éŒ„ä¸‹é‹è¡Œ
.\diagnose-connection.ps1
```

#### 1.2 æ‰‹å‹•æª¢æŸ¥
```bash
# æª¢æŸ¥Node.jsé€²ç¨‹
Get-Process node -ErrorAction SilentlyContinue

# æª¢æŸ¥ç«¯å£ä½¿ç”¨
netstat -an | findstr :3001

# æ¸¬è©¦APIé€£æ¥
curl -H "x-api-public-key: ttdrcccy" -H "x-api-private-key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" http://localhost:3001/health
```

### æ­¥é©Ÿ2: é‡å•ŸAPIæœå‹™å™¨

#### 2.1 ä½¿ç”¨ä¿®å¾©è…³æœ¬
```bash
# åœ¨api-serverç›®éŒ„ä¸‹é‹è¡Œ
.\fix-login-issue.bat
```

#### 2.2 æ‰‹å‹•é‡å•Ÿ
```bash
# åœæ­¢æ‰€æœ‰Node.jsé€²ç¨‹
taskkill /f /im node.exe

# ç­‰å¾…3ç§’
timeout /t 3

# å•Ÿå‹•æœå‹™å™¨
node server.js
```

### æ­¥é©Ÿ3: é©—è­‰APIæœå‹™å™¨

#### 3.1 æª¢æŸ¥å•Ÿå‹•ä¿¡æ¯
æœå‹™å™¨å•Ÿå‹•æ™‚æ‡‰è©²é¡¯ç¤ºï¼š
```
ğŸš€ API æœå‹™å™¨å·²å•Ÿå‹•
ğŸ“ æœ¬åœ°åœ°å€: http://localhost:3001
ğŸŒ æœå‹™å™¨åœ°å€: http://203.145.95.240:3001
ğŸ”‘ API å¯†é‘°å·²é…ç½®
```

#### 3.2 æ¸¬è©¦å¥åº·æª¢æŸ¥
```bash
# æœ¬åœ°æ¸¬è©¦
curl -H "x-api-public-key: ttdrcccy" -H "x-api-private-key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" http://localhost:3001/health

# å…¬ç¶²æ¸¬è©¦
curl -H "x-api-public-key: ttdrcccy" -H "x-api-private-key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" http://203.145.95.240:3001/health
```

### æ­¥é©Ÿ4: é‡æ–°æ§‹å»ºAndroid APK

#### 4.1 ç¢ºèªä»£ç¢¼æ›´æ–°
æª¢æŸ¥ä»¥ä¸‹æ–‡ä»¶æ˜¯å¦å·²æ›´æ–°ç‚ºç«¯å£3001ï¼š
- `app/src/main/java/com/swimming/attendance/network/APIConfig.kt`
- `app/src/main/java/com/swimming/attendance/ui/NetworkConfigActivity.kt`

#### 4.2 æ§‹å»ºæ–°APK
```bash
# åœ¨Android_appç›®éŒ„ä¸‹é‹è¡Œ
.\build_new_apk.bat
```

### æ­¥é©Ÿ5: å®‰è£å’Œæ¸¬è©¦

#### 5.1 å®‰è£æ–°APK
1. å°‡ `app\build\outputs\apk\release\app-release.apk` å‚³è¼¸åˆ°Androidè¨­å‚™
2. åœ¨è¨­å‚™ä¸Šå•Ÿç”¨"æœªçŸ¥ä¾†æº"æ‡‰ç”¨å®‰è£
3. å®‰è£æ–°APK

#### 5.2 æ¸¬è©¦ç™»å…¥
1. å•Ÿå‹•æ‡‰ç”¨
2. é¸æ“‡å®¶é•·ç‰ˆæœ¬
3. è¼¸å…¥æ¸¬è©¦è³¬è™Ÿï¼š
   - é›»è©±ï¼štest
   - å¯†ç¢¼ï¼š123456
4. é»æ“Šç™»å…¥

## ğŸ§ª æ¸¬è©¦è³¬è™Ÿ

### å¯ç”¨æ¸¬è©¦è³¬è™Ÿ
| é›»è©±è™Ÿç¢¼ | å¯†ç¢¼ | ç”¨æˆ¶é¡å‹ |
|---------|------|----------|
| test | 123456 | parent |
| 0912345678 | 123456 | parent |
| admin | admin123 | parent |
| demo | demo123 | parent |

## ğŸ“± Androidæ‡‰ç”¨é…ç½®

### APIé…ç½®
- **åŸºç¤URL**: http://203.145.95.240:3001
- **å…¬é–‹å¯†é‘°**: ttdrcccy
- **ç§æœ‰å¯†é‘°**: 2b207365-cbf0-4e42-a3bf-f932c84557c4

### ç¶²çµ¡æ¬Šé™
ç¢ºä¿AndroidManifest.xmlåŒ…å«ï¼š
```xml
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
```

## ğŸ” æ•…éšœæ’é™¤

### å•é¡Œ1: APIæœå‹™å™¨ç„¡æ³•å•Ÿå‹•
**ç—‡ç‹€**: ç«¯å£è¢«ä½”ç”¨éŒ¯èª¤
**è§£æ±ºæ–¹æ¡ˆ**:
```bash
# æŸ¥æ‰¾ä½”ç”¨ç«¯å£çš„é€²ç¨‹
netstat -ano | findstr :3001
# çµ‚æ­¢é€²ç¨‹
taskkill /f /pid <é€²ç¨‹ID>
```

### å•é¡Œ2: é˜²ç«ç‰†é˜»æ­¢é€£æ¥
**ç—‡ç‹€**: é€£æ¥è¶…æ™‚
**è§£æ±ºæ–¹æ¡ˆ**:
1. æª¢æŸ¥Windowsé˜²ç«ç‰†è¨­ç½®
2. å…è¨±Node.jsé€šéé˜²ç«ç‰†
3. é–‹æ”¾ç«¯å£3001

### å•é¡Œ3: ç¶²çµ¡æ¬Šé™å•é¡Œ
**ç—‡ç‹€**: æ‡‰ç”¨ç„¡æ³•è¨ªå•ç¶²çµ¡
**è§£æ±ºæ–¹æ¡ˆ**:
1. æª¢æŸ¥æ‡‰ç”¨æ¬Šé™è¨­ç½®
2. ç¢ºä¿ç¶²çµ¡æ¬Šé™å·²æˆäºˆ
3. é‡å•Ÿæ‡‰ç”¨

### å•é¡Œ4: DNSè§£æå•é¡Œ
**ç—‡ç‹€**: ç„¡æ³•è§£ææœå‹™å™¨IP
**è§£æ±ºæ–¹æ¡ˆ**:
1. ä½¿ç”¨IPåœ°å€è€Œä¸æ˜¯åŸŸå
2. æª¢æŸ¥ç¶²çµ¡è¨­ç½®
3. å˜—è©¦ä½¿ç”¨æœ¬åœ°Wi-Fiç¶²çµ¡

## ğŸ“Š è¨ºæ–·å·¥å…·

### 1. ç¶²çµ¡è¨ºæ–·
```bash
# æ¸¬è©¦ç¶²çµ¡é€£æ¥
ping 203.145.95.240

# æ¸¬è©¦ç«¯å£é€£æ¥
telnet 203.145.95.240 3001
```

### 2. APIè¨ºæ–·
```bash
# å¥åº·æª¢æŸ¥
curl -H "x-api-public-key: ttdrcccy" -H "x-api-private-key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" http://203.145.95.240:3001/health

# ç²å–å­¸ç”Ÿè³‡æ–™
curl -H "x-api-public-key: ttdrcccy" -H "x-api-private-key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" http://203.145.95.240:3001/students
```

### 3. Androidæ‡‰ç”¨è¨ºæ–·
1. é•·æŒ‰ç™»å…¥æŒ‰éˆ•é€²å…¥æ¸¬è©¦ç•Œé¢
2. æŸ¥çœ‹é€£æ¥ç‹€æ…‹
3. æª¢æŸ¥APIé…ç½®

## âœ… é©—è­‰æ¸…å–®

- [ ] APIæœå‹™å™¨åœ¨ç«¯å£3001æ­£å¸¸é‹è¡Œ
- [ ] å¥åº·æª¢æŸ¥ç«¯é»éŸ¿æ‡‰æ­£å¸¸
- [ ] Androidæ‡‰ç”¨ä»£ç¢¼å·²æ›´æ–°ç‚ºç«¯å£3001
- [ ] æ–°APKå·²æ§‹å»ºä¸¦å®‰è£
- [ ] ç¶²çµ¡æ¬Šé™å·²æˆäºˆ
- [ ] æ¸¬è©¦è³¬è™Ÿå¯ä»¥æ­£å¸¸ç™»å…¥

## ğŸš¨ ç·Šæ€¥ä¿®å¾©

å¦‚æœå•é¡ŒæŒçºŒå­˜åœ¨ï¼Œå¯ä»¥å˜—è©¦ï¼š

1. **é‡å•Ÿæ•´å€‹ç³»çµ±**
2. **ä½¿ç”¨æœ¬åœ°Wi-Fiç¶²çµ¡** (192.168.1.24:3001)
3. **æª¢æŸ¥æœå‹™å™¨é˜²ç«ç‰†è¨­ç½®**
4. **è¯ç¹«ç¶²çµ¡ç®¡ç†å“¡**

---

**æœ€å¾Œæ›´æ–°**: 2025å¹´1æœˆ8æ—¥  
**ç‰ˆæœ¬**: 1.0  
**ç‹€æ…‹**: å¾…æ¸¬è©¦ 