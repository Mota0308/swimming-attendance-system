# ç”¨æˆ¶è³¬æˆ¶å‰µå»ºç•°å¸¸è¨ºæ–·æŒ‡å—

## ğŸš¨ å•é¡Œæè¿°

ç”¨æˆ¶åæ˜ ï¼šé»æ“Šå‰µå»ºè³¬è™Ÿæ™‚é¡¯ç¤º"ç”¨æˆ¶è³¬æˆ¶å‰µå»ºç•°å¸¸"éŒ¯èª¤ã€‚

## ğŸ” å¯èƒ½çš„åŸå› åˆ†æ

### 1. ç¶²çµ¡é€£æ¥å•é¡Œ
- **APIæœå‹™å™¨æœªé‹è¡Œ**
- **ç¶²çµ¡é€£æ¥è¶…æ™‚**
- **é˜²ç«ç‰†é˜»æ­¢é€£æ¥**

### 2. APIé…ç½®å•é¡Œ
- **åŸºç¤URLéŒ¯èª¤**
- **APIå¯†é‘°ç„¡æ•ˆ**
- **è«‹æ±‚æ ¼å¼éŒ¯èª¤**

### 3. æœå‹™å™¨ç«¯å•é¡Œ
- **MongoDBé€£æ¥å¤±æ•—**
- **æ•¸æ“šåº«æ¬Šé™å•é¡Œ**
- **æœå‹™å™¨å…§éƒ¨éŒ¯èª¤**

### 4. å®¢æˆ¶ç«¯å•é¡Œ
- **JSONæ ¼å¼éŒ¯èª¤**
- **è«‹æ±‚é ­ç¼ºå¤±**
- **è¶…æ™‚è¨­ç½®éçŸ­**

## ğŸ› ï¸ è¨ºæ–·æ­¥é©Ÿ

### æ­¥é©Ÿ1: æª¢æŸ¥APIæœå‹™å™¨ç‹€æ…‹

```bash
# æª¢æŸ¥æœå‹™å™¨æ˜¯å¦é‹è¡Œ
netstat -an | findstr :3000

# æ¸¬è©¦å¥åº·æª¢æŸ¥ç«¯é»
curl -H "X-API-Public-Key: ttdrcccy" -H "X-API-Private-Key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" http://203.145.95.240:3000/health
```

### æ­¥é©Ÿ2: æª¢æŸ¥ç¶²çµ¡é€£æ¥

```bash
# æ¸¬è©¦ç¶²çµ¡é€£æ¥
ping 203.145.95.240

# æ¸¬è©¦ç«¯å£é€£æ¥
telnet 203.145.95.240 3000
```

### æ­¥é©Ÿ3: æª¢æŸ¥APIé…ç½®

```kotlin
// æª¢æŸ¥ç•¶å‰é…ç½®
val baseUrl = apiConfig.getBaseUrl()
val publicKey = apiConfig.getPublicApiKey()
val privateKey = apiConfig.getPrivateApiKey()

Log.d("Diagnostic", "Base URL: $baseUrl")
Log.d("Diagnostic", "Public Key: $publicKey")
Log.d("Diagnostic", "Private Key: $privateKey")
```

### æ­¥é©Ÿ4: æ¸¬è©¦APIç«¯é»

```bash
# æ¸¬è©¦ç”¨æˆ¶è¨»å†Šç«¯é»
curl -X POST http://203.145.95.240:3000/auth/register \
  -H "Content-Type: application/json" \
  -H "X-API-Public-Key: ttdrcccy" \
  -H "X-API-Private-Key: 2b207365-cbf0-4e42-a3bf-f932c84557c4" \
  -d '{
    "phone": "test123456",
    "password": "password123",
    "userType": "parent",
    "createdAt": 1640995200000
  }'
```

## ğŸ“‹ è¨ºæ–·æª¢æŸ¥æ¸…å–®

### ç¶²çµ¡æª¢æŸ¥
- [ ] APIæœå‹™å™¨æ­£åœ¨é‹è¡Œ
- [ ] ç«¯å£3000å·²é–‹æ”¾
- [ ] ç¶²çµ¡é€£æ¥æ­£å¸¸
- [ ] é˜²ç«ç‰†æœªé˜»æ­¢é€£æ¥

### é…ç½®æª¢æŸ¥
- [ ] åŸºç¤URLæ­£ç¢º: `http://203.145.95.240:3000`
- [ ] APIå¯†é‘°æ­£ç¢º
- [ ] è«‹æ±‚é ­è¨­ç½®æ­£ç¢º
- [ ] Content-Typeè¨­ç½®æ­£ç¢º

### æœå‹™å™¨æª¢æŸ¥
- [ ] MongoDBé€£æ¥æ­£å¸¸
- [ ] æ•¸æ“šåº«æ¬Šé™æ­£ç¢º
- [ ] æœå‹™å™¨æ—¥èªŒç„¡éŒ¯èª¤
- [ ] å…§å­˜ä½¿ç”¨æ­£å¸¸

### å®¢æˆ¶ç«¯æª¢æŸ¥
- [ ] JSONæ ¼å¼æ­£ç¢º
- [ ] è«‹æ±‚æ–¹æ³•æ­£ç¢º (POST)
- [ ] è¶…æ™‚è¨­ç½®åˆç†
- [ ] éŒ¯èª¤è™•ç†æ­£å¸¸

## ğŸ”§ å¸¸è¦‹è§£æ±ºæ–¹æ¡ˆ

### è§£æ±ºæ–¹æ¡ˆ1: é‡å•ŸAPIæœå‹™å™¨

```bash
# åœæ­¢ç¾æœ‰æœå‹™å™¨
taskkill /F /IM node.exe

# é‡æ–°å•Ÿå‹•æœå‹™å™¨
cd api-server
node server.js
```

### è§£æ±ºæ–¹æ¡ˆ2: æª¢æŸ¥MongoDBé€£æ¥

```javascript
// åœ¨server.jsä¸­æ·»åŠ é€£æ¥æ¸¬è©¦
const testConnection = async () => {
    try {
        const client = new MongoClient(MONGO_URI);
        await client.connect();
        console.log('âœ… MongoDBé€£æ¥æˆåŠŸ');
        await client.close();
    } catch (error) {
        console.error('âŒ MongoDBé€£æ¥å¤±æ•—:', error);
    }
};
```

### è§£æ±ºæ–¹æ¡ˆ3: å¢åŠ éŒ¯èª¤æ—¥èªŒ

```kotlin
// åœ¨CloudAPIServiceä¸­æ·»åŠ è©³ç´°æ—¥èªŒ
Log.d(TAG, "ğŸ”— å˜—è©¦é€£æ¥åˆ°: ${apiConfig.getBaseUrl()}/auth/register")
Log.d(TAG, "ğŸ“¤ ç™¼é€æ•¸æ“š: $jsonData")
Log.d(TAG, "ğŸ“Š éŸ¿æ‡‰ç¢¼: $responseCode")
Log.d(TAG, "ğŸ“„ éŸ¿æ‡‰å…§å®¹: $response")
```

### è§£æ±ºæ–¹æ¡ˆ4: æ·»åŠ é‡è©¦æ©Ÿåˆ¶

```kotlin
private suspend fun createUserAccountWithRetry(userAccount: UserAccount, maxRetries: Int = 3): APIResponse {
    repeat(maxRetries) { attempt ->
        try {
            val result = createUserAccount(userAccount)
            if (result.success) return result
        } catch (e: Exception) {
            Log.w(TAG, "é‡è©¦ ${attempt + 1}/$maxRetries å¤±æ•—: ${e.message}")
            if (attempt == maxRetries - 1) throw e
            delay(1000 * (attempt + 1)) // æŒ‡æ•¸é€€é¿
        }
    }
    return APIResponse(false, "é‡è©¦æ¬¡æ•¸å·²ç”¨å®Œ")
}
```

## ğŸ“Š éŒ¯èª¤ä»£ç¢¼å°ç…§è¡¨

| éŒ¯èª¤ä»£ç¢¼ | å¯èƒ½åŸå›  | è§£æ±ºæ–¹æ¡ˆ |
|---------|---------|---------|
| 404 | ç«¯é»ä¸å­˜åœ¨ | æª¢æŸ¥URLè·¯å¾‘ |
| 401 | APIå¯†é‘°éŒ¯èª¤ | é©—è­‰å¯†é‘°é…ç½® |
| 500 | æœå‹™å™¨å…§éƒ¨éŒ¯èª¤ | æª¢æŸ¥æœå‹™å™¨æ—¥èªŒ |
| è¶…æ™‚ | ç¶²çµ¡é€£æ¥å•é¡Œ | æª¢æŸ¥ç¶²çµ¡è¨­ç½® |
| JSONè§£æéŒ¯èª¤ | æ•¸æ“šæ ¼å¼éŒ¯èª¤ | æª¢æŸ¥è«‹æ±‚é«”æ ¼å¼ |

## ğŸš€ ç«‹å³è¡Œå‹•

### 1. æª¢æŸ¥æœå‹™å™¨ç‹€æ…‹
```bash
# æª¢æŸ¥Node.jsé€²ç¨‹
tasklist | findstr node

# æª¢æŸ¥ç«¯å£ä½¿ç”¨
netstat -an | findstr :3000
```

### 2. é‡å•Ÿæœå‹™å™¨
```bash
cd api-server
node server.js
```

### 3. æ¸¬è©¦é€£æ¥
```bash
curl http://203.145.95.240:3000/health
```

### 4. é‡æ–°æ§‹å»ºAPK
```bash
cd Android_app
./gradlew assembleDebug
```

## ğŸ“ é€²ä¸€æ­¥è¨ºæ–·

å¦‚æœå•é¡Œä»ç„¶å­˜åœ¨ï¼Œè«‹æä¾›ä»¥ä¸‹ä¿¡æ¯ï¼š

1. **å®Œæ•´çš„éŒ¯èª¤æ—¥èªŒ**
2. **APIæœå‹™å™¨æ§åˆ¶å°è¼¸å‡º**
3. **ç¶²çµ¡é€£æ¥æ¸¬è©¦çµæœ**
4. **Android Studio Logcatè¼¸å‡º**

---

**è¨ºæ–·ç‰ˆæœ¬**: 1.0.0  
**å‰µå»ºæ—¥æœŸ**: 2025å¹´8æœˆ7æ—¥  
**é©ç”¨æ–¼**: ç”¨æˆ¶è³¬æˆ¶å‰µå»ºç•°å¸¸å•é¡Œ 
 