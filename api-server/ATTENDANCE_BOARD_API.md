# å‡ºå¸­ç®¡ç†æ¨¡å¡Š API æ–‡æª”

## ğŸ“‹ æ¦‚è¿°

å‡ºå¸­ç®¡ç†æ¨¡å¡Šå¾ `students_timeslot` é›†åˆä¸­ç²å–æ•¸æ“šï¼ŒæŒ‰ç…§ä»¥ä¸‹å±¤ç´šçµæ§‹çµ„ç¹”ï¼š
1. **å¤§åˆ†é¡**ï¼š`classDate` + `location`
2. **åˆ†æ”¯åˆ†é¡**ï¼š`classTime` + `classFormat` + `instructorType`
3. **å­¸ç”Ÿåˆ—è¡¨**ï¼šé€šé `studentId` æŸ¥æ‰¾å­¸ç”Ÿå§“å

## ğŸ”Œ API ç«¯é»

### GET `/attendance/timeslots`

ç²å–å‡ºå¸­ç®¡ç†æ•¸æ“šï¼ŒæŒ‰æ—¥æœŸå’Œåœ°é»åˆ†çµ„ã€‚

#### è«‹æ±‚åƒæ•¸

| åƒæ•¸ | é¡å‹ | å¿…å¡« | èªªæ˜ |
|------|------|------|------|
| `classDate` | string | å¦ | æ—¥æœŸï¼ˆYYYY-MM-DD æ ¼å¼ï¼‰ï¼Œä¸æä¾›å‰‡è¿”å›æ‰€æœ‰æ—¥æœŸ |
| `location` | string | å¦ | åœ°é»ï¼Œä¸æä¾›å‰‡è¿”å›æ‰€æœ‰åœ°é» |

#### è«‹æ±‚ç¤ºä¾‹

```javascript
// ç²å–ç‰¹å®šæ—¥æœŸå’Œåœ°é»çš„æ•¸æ“š
GET /attendance/timeslots?classDate=2025-10-20&location=ç¾å­š

// ç²å–ç‰¹å®šæ—¥æœŸçš„æ‰€æœ‰åœ°é»æ•¸æ“š
GET /attendance/timeslots?classDate=2025-10-20

// ç²å–æ‰€æœ‰æ•¸æ“š
GET /attendance/timeslots
```

#### éŸ¿æ‡‰æ ¼å¼

```json
{
  "success": true,
  "data": [
    {
      "classDate": "2025-10-20",
      "location": "ç¾å­š",
      "groups": [
        {
          "classTime": "0900-1200",
          "classFormat": "å¹¼å…’ç§äººç­1:1",
          "instructorType": "å›ºå®šæ³³ç­å°å¸«",
          "instructorName": "AAA",
          "students": [
            {
              "studentId": "00000001",
              "studentName": "å¼µä¸‰",
              "studentPhone": "12345678"
            },
            {
              "studentId": "00000002",
              "studentName": "æå››",
              "studentPhone": "87654321"
            }
          ]
        },
        {
          "classTime": "1400-1700",
          "classFormat": "æŒ‡å®šå°å¸«ä¸­ç­1:4-6",
          "instructorType": "å›ºå®šæ³³ç­å°å¸«",
          "instructorName": "BBB",
          "students": [
            {
              "studentId": "00000003",
              "studentName": "ç‹äº”",
              "studentPhone": "11111111"
            }
          ]
        }
      ]
    }
  ],
  "totalRecords": 3
}
```

## ğŸ“Š æ•¸æ“šçµæ§‹

### åˆ†çµ„å±¤ç´š

1. **ç¬¬ä¸€å±¤ï¼šæ—¥æœŸ-åœ°é»çµ„åˆ**
   - `classDate`: æ—¥æœŸï¼ˆYYYY-MM-DD æ ¼å¼ï¼‰
   - `location`: åœ°é»

2. **ç¬¬äºŒå±¤ï¼šæ™‚æ®µåˆ†çµ„**
   - `classTime`: ä¸Šèª²æ™‚é–“ï¼ˆä¾‹å¦‚ï¼š"0900-1200"ï¼‰
   - `classFormat`: èª²ç¨‹æ ¼å¼ï¼ˆä¾‹å¦‚ï¼š"å¹¼å…’ç§äººç­1:1"ï¼‰
   - `instructorType`: å°å¸«é¡å‹ï¼ˆä¾‹å¦‚ï¼š"å›ºå®šæ³³ç­å°å¸«"ï¼‰
   - `instructorName`: å°å¸«å§“å
   - `students`: å­¸ç”Ÿåˆ—è¡¨

3. **ç¬¬ä¸‰å±¤ï¼šå­¸ç”Ÿä¿¡æ¯**
   - `studentId`: å­¸ç”ŸIDï¼ˆ8ä½æ•¸å­—ï¼‰
   - `studentName`: å­¸ç”Ÿå§“åï¼ˆé€šé studentId æŸ¥æ‰¾ï¼‰
   - `studentPhone`: å­¸ç”Ÿé›»è©±

## ğŸ” æŸ¥è©¢é‚è¼¯

### 1. æ•¸æ“šéæ¿¾
- åªæŸ¥è©¢ `classDate` ä¸ç‚º `null` çš„è¨˜éŒ„ï¼ˆæ’é™¤å¾…ç´„è¨˜éŒ„ï¼‰
- æ’é™¤ `isPending: true` çš„è¨˜éŒ„

### 2. å­¸ç”Ÿå§“åæŸ¥æ‰¾
- é€šé `studentId` æ‰¹é‡æŸ¥è©¢ `Student_account` é›†åˆ
- å‰µå»º `studentId -> name` æ˜ å°„è¡¨
- å¦‚æœæ‰¾ä¸åˆ°å­¸ç”Ÿï¼Œé¡¯ç¤º "æœªçŸ¥å­¸ç”Ÿ"

### 3. åˆ†çµ„é‚è¼¯
- æŒ‰ `classDate` + `location` åˆ†çµ„
- åœ¨æ¯å€‹æ—¥æœŸ-åœ°é»çµ„åˆå…§ï¼ŒæŒ‰ `classTime` + `classFormat` + `instructorType` åˆ†çµ„

### 4. æ’åºé‚è¼¯
- **æ—¥æœŸ-åœ°é»çµ„åˆ**ï¼šæŒ‰ `classDate` å¾æ—©åˆ°æ™šæ’åº
- **æ™‚æ®µåˆ†çµ„**ï¼šæŒ‰ `classTime` çš„é–‹å§‹æ™‚é–“å¾æ—©åˆ°æ™šæ’åº
  - æ”¯æŒ "0900-1200" æ ¼å¼ï¼ˆ4ä½æ•¸å­—ï¼‰
  - æ”¯æŒ "09:00-12:00" æ ¼å¼ï¼ˆå¸¶å†’è™Ÿï¼‰

## ğŸ¯ å‰ç«¯ä½¿ç”¨

### åˆå§‹åŒ–å‡ºå¸­æ¿

```javascript
// åŸºæœ¬ç”¨æ³•
window.initAttendanceBoard('attendanceTable');

// å¸¶åƒæ•¸ï¼ˆéæ¿¾ç‰¹å®šæ—¥æœŸå’Œåœ°é»ï¼‰
window.initAttendanceBoard('attendanceTable', {
  classDate: '2025-10-20',
  location: 'ç¾å­š'
});
```

### åˆ·æ–°å‡ºå¸­æ¿

```javascript
// åˆ·æ–°ç•¶å‰æ•¸æ“š
window.refreshAttendanceBoard('attendanceTable', '2025-10-20', 'ç¾å­š');
```

## ğŸ“ æ³¨æ„äº‹é …

1. **æ—¥æœŸæ ¼å¼**ï¼šå¿…é ˆä½¿ç”¨ `YYYY-MM-DD` æ ¼å¼ï¼ˆä¾‹å¦‚ï¼š"2025-10-20"ï¼‰
2. **æ™‚é–“æ ¼å¼**ï¼šæ”¯æŒ "0900-1200" å’Œ "09:00-12:00" å…©ç¨®æ ¼å¼
3. **å¾…ç´„è¨˜éŒ„**ï¼šä¸æœƒå‡ºç¾åœ¨çµæœä¸­ï¼ˆ`classDate` ç‚º `null`ï¼‰
4. **æ€§èƒ½å„ªåŒ–**ï¼šä½¿ç”¨é€£æ¥æ± å’Œæ‰¹é‡æŸ¥è©¢å­¸ç”Ÿä¿¡æ¯

## ğŸ”§ ç›¸é—œæ–‡ä»¶

- **å¾Œç«¯ API**ï¼š`api-server/server.js` ç¬¬2553-2690è¡Œ
- **å‰ç«¯æ¨¡å¡Š**ï¼š`Web_app/attendance-board.js`
- **å‰ç«¯èª¿ç”¨**ï¼š`Web_app/coach-functions.js` ç¬¬185-247è¡Œ
- **æ¨£å¼æ–‡ä»¶**ï¼š`Web_app/styles.css` ç¬¬366-409è¡Œ

---

**å‰µå»ºæ—¥æœŸ**ï¼š2025-02-06
**ç‹€æ…‹**ï¼šâœ… å·²å®Œæˆ
























