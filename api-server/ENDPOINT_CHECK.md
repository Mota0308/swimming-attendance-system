# API ç«¯ç‚¹å®Œæ•´æ€§æ£€æŸ¥æŠ¥å‘Š

## âœ… å‰ç«¯ä½¿ç”¨çš„æ‰€æœ‰ç«¯ç‚¹åŠå…¶åç«¯å¯¹åº”æƒ…å†µ

### è®¤è¯ç›¸å…³
- âœ… `POST /auth/login` - ç”¨æˆ·ç™»å½•
- âœ… `GET /health` - å¥åº·æ£€æŸ¥

### åœ°ç‚¹ç›¸å…³
- âœ… `GET /locations` - è·å–åœ°ç‚¹åˆ—è¡¨ï¼ˆä» Location_club é›†åˆï¼‰
- âœ… `GET /class-locations` - è·å– Class_location é›†åˆä¸­çš„åœ°ç‚¹åˆ—è¡¨
- âœ… `GET /location-clubs` - è·å–åœ°ç‚¹æ³³ä¼šç»„åˆ
- âœ… `GET /clubs` - è·å–ä¿±ä¹éƒ¨åˆ—è¡¨

### å‘˜å·¥/ç”¨æˆ·ç›¸å…³
- âœ… `GET /coaches` - è·å–æ•™ç»ƒåˆ—è¡¨
- âœ… `GET /admins` - è·å–ç®¡ç†å‘˜åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
- âœ… `POST /create-employee` - åˆ›å»ºæ–°å‘˜å·¥
- âœ… `PUT /admins/:phone` - æ›´æ–°ç”¨æˆ·/å‘˜å·¥èµ„æ–™
- âœ… `PUT /update-user/:phone` - æ›´æ–°ç”¨æˆ·ä¿¡æ¯ï¼ˆåˆ«åç«¯ç‚¹ï¼Œå‘åå…¼å®¹ï¼‰âœ… **å·²æ·»åŠ **
- âœ… `DELETE /admins/:phone` - åˆ é™¤ç”¨æˆ·/å‘˜å·¥

### å­¦ç”Ÿç›¸å…³
- âœ… `GET /students` - è·å–å­¦ç”Ÿåˆ—è¡¨ï¼ˆæ”¯æŒåˆ†é¡µå’Œç”µè¯æŸ¥è¯¢ï¼‰
- âœ… `GET /students/:id` - è·å–å•ä¸ªå­¦ç”Ÿèµ„æ–™ï¼ˆæ”¯æŒ _idã€studentIdã€phoneï¼‰
- âœ… `PUT /students/:id` - æ›´æ–°å­¦ç”Ÿèµ„æ–™
- âœ… `DELETE /students/:id` - åˆ é™¤å­¦ç”Ÿèµ„æ–™
- âœ… `GET /student/:studentId/class-dates` - è·å–å­¦ç”Ÿçš„æ‰€æœ‰ä¸Šè¯¾æ—¥æœŸ

### è¯•å ‚ç›¸å…³
- âœ… `POST /trial-bill/create` - åˆ›å»ºè¯•å ‚è®°å½•ï¼ˆæ”¯æŒæ‰¹é‡ï¼‰
- âœ… `GET /trial-bill/all` - è·å–æ‰€æœ‰è¯•å ‚è®°å½•ï¼ˆæ”¯æŒåˆ†é¡µï¼‰
- âœ… `GET /trial-bill/:trailId` - æ ¹æ® TrailID æŸ¥è¯¢è¯•å ‚èµ„æ–™
- âœ… `PUT /trial-bill/:id` - æ›´æ–°è¯•å ‚èµ„æ–™
- âœ… `DELETE /trial-bill/:id` - åˆ é™¤è¯•å ‚èµ„æ–™

### æ›´è¡¨ç›¸å…³
- âœ… `GET /roster` - è·å–æ›´è¡¨æ•°æ®
- âœ… `POST /coach-roster/batch` - æ‰¹é‡ä¿å­˜æ•™ç»ƒæ›´è¡¨
- âœ… `POST /coach-roster/backfill-slots` - æ•°æ®è¿ç§»ï¼šä¸ºæ—§çš„æ›´è¡¨è®°å½•æ·»åŠ  slot å­—æ®µ

### å‡ºå¸­ç®¡ç†ç›¸å…³
- âœ… `GET /attendance` - è·å–å‡ºå¸­æ•°æ®
- âœ… `GET /attendance/timeslots` - è·å–å‡ºå¸­ç®¡ç†æ•°æ®ï¼ˆæŒ‰ classDate å’Œ location åˆ†ç»„ï¼‰
- âœ… `PUT /attendance/timeslot/status` - æ›´æ–°å­¦ç”Ÿå‡ºå¸­çŠ¶æ€
- âœ… `PUT /attendance/timeslot/move` - æ›´æ–°å­¦ç”Ÿæ—¶æ®µä¿¡æ¯ï¼ˆæ‹–æ‹½ç§»åŠ¨ï¼‰
- âœ… `PUT /attendance/timeslot/date-location` - æ›´æ–°å­¦ç”Ÿä¸Šè¯¾æ—¥æœŸå’Œåœ°ç‚¹
- âœ… `PUT /attendance/trial-bill/status` - æ›´æ–°è¯•å ‚è®°å½•å‡ºå¸­çŠ¶æ€

### å·¥æ—¶ç®¡ç†ç›¸å…³
- âœ… `GET /staff-work-hours/:phone/:year/:month` - è·å–å·¥æ—¶è®°å½•
- âœ… `POST /staff-work-hours/batch` - æ‰¹é‡ä¿å­˜å·¥æ—¶è®°å½•
- âœ… `GET /work-hours/compare/:phone/:year/:month` - æ¯”è¾ƒå·¥æ—¶è®°å½•ï¼ˆæ•™ç»ƒç‰ˆæœ¬ vs ç®¡ç†å“¡/ä¸»ç®¡ç‰ˆæœ¬ï¼‰

### è¯¾ç¨‹ç›¸å…³
- âœ… `GET /class-types` - è·å–è¯¾ç¨‹ç±»å‹
- âœ… `GET /class-formats` - è·å–è¯¾å ‚å½¢å¼ï¼ˆæ ¹æ®è¯¾ç¨‹ç±»å‹è¿‡æ»¤ï¼‰
- âœ… `GET /instructor-levels` - è·å–å¯¼å¸ˆçº§åˆ«ï¼ˆæ— å‰ç½®æ¡ä»¶ï¼‰
- âœ… `GET /pricing` - è·å–ä»·æ ¼ï¼ˆæ ¹æ®è¯¾ç¨‹ç±»å‹ã€è¯¾å ‚å½¢å¼å’Œå¯¼å¸ˆçº§åˆ«ï¼‰

### è´¦å•ç›¸å…³
- âœ… `POST /create-student-bill` - åˆ›å»ºå­¦ç”Ÿè´¦å•ï¼ˆåŒ…å«æ”¶æ®å›¾ç‰‡ï¼‰

### å­¦ç”Ÿå ‚æ•°ç›¸å…³
- âœ… `GET /student-classes` - è·å–å­¦ç”Ÿå ‚æ•°æ•°æ®ï¼ˆå«åŒæœˆåˆ†ç±»ä¸ç­›é€‰ï¼‰

### æ–‡ä»¶ä¸Šä¼ ç›¸å…³
- âœ… `POST /upload-receipt` - ä¸Šä¼ æ”¶æ®å›¾ç‰‡
- âœ… `POST /upload/image` - ä¸Šä¼ å›¾ç‰‡ï¼ˆé€šç”¨ï¼‰

### ç”¨æˆ·åå¥½è®¾ç½®ç›¸å…³
- âœ… `POST /user-preferences/work-hours-collapse` - ä¿å­˜ç”¨æˆ·å·¥æ—¶ç®¡ç†éšè—åˆ—è¡¨å¤´çŠ¶æ€
- âœ… `GET /user-preferences/work-hours-collapse` - è·å–ç”¨æˆ·å·¥æ—¶ç®¡ç†éšè—åˆ—è¡¨å¤´çŠ¶æ€
- âœ… `DELETE /user-preferences/work-hours-collapse` - æ¸…é™¤ç”¨æˆ·å·¥æ—¶ç®¡ç†éšè—åˆ—è¡¨å¤´çŠ¶æ€

### å…¶ä»–ç«¯ç‚¹ï¼ˆåç«¯æœ‰ä½†å‰ç«¯å¯èƒ½æœªä½¿ç”¨ï¼‰
- âœ… `GET /api/coach/:phone` - è·å–æ•™ç»ƒä¿¡æ¯
- âœ… `GET /api/coach/:phone/schedule` - è·å–æ•™ç»ƒæ’ç­
- âœ… `GET /api/coach/:phone/work-hours` - è·å–æ•™ç»ƒå·¥æ—¶
- âœ… `POST /api/coach/:phone/work-hours` - æ›´æ–°æ•™ç»ƒå·¥æ—¶
- âœ… `GET /db-health` - æ•°æ®åº“å¥åº·æ£€æŸ¥

## ğŸ“Š ç»Ÿè®¡

- **å‰ç«¯ä½¿ç”¨çš„ç«¯ç‚¹æ€»æ•°**: 39
- **åç«¯å®ç°çš„ç«¯ç‚¹æ€»æ•°**: 50
- **åŒ¹é…çš„ç«¯ç‚¹**: 39
- **ç¼ºå¤±çš„ç«¯ç‚¹**: 0 âœ…
- **åç«¯é¢å¤–ç«¯ç‚¹**: 11ï¼ˆæœªåœ¨å‰ç«¯ä½¿ç”¨ï¼Œä½†ä¿ç•™ç”¨äºå…¶ä»–ç”¨é€”ï¼‰

## âœ… ç»“è®º

**æ‰€æœ‰å‰ç«¯ä½¿ç”¨çš„ç«¯ç‚¹éƒ½å·²åœ¨åç«¯å®ç°ï¼** æ²¡æœ‰é—æ¼çš„ç«¯ç‚¹ã€‚

### ä¿®å¤è®°å½•

1. âœ… æ·»åŠ äº† `PUT /update-user/:phone` ç«¯ç‚¹ä½œä¸º `/admins/:phone` çš„åˆ«åï¼Œä»¥ä¿æŒå‘åå…¼å®¹
2. âœ… æ‰€æœ‰ç«¯ç‚¹éƒ½å·²ä½¿ç”¨è¿æ¥æ± ä¼˜åŒ–æ€§èƒ½
3. âœ… æ‰€æœ‰ç«¯ç‚¹éƒ½å·²æ·»åŠ  API å¯†é’¥éªŒè¯













