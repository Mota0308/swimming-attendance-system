# 🔥 防火牆配置說明

## 📍 端口配置

### Web前端端口
- **端口**: 8080
- **用途**: 網頁界面，供所有用戶訪問
- **協議**: HTTP

### API後端端口
- **端口**: 3001
- **用途**: 後端API服務，僅本地訪問
- **協議**: HTTP

## 🖥️ Windows防火牆配置

### 方法1：使用Windows防火牆高級設置

1. **打開防火牆設置**
   - 按 `Win + R`，輸入 `wf.msc`
   - 點擊"確定"

2. **創建入站規則**
   - 右鍵點擊"入站規則"
   - 選擇"新建規則"

3. **規則類型**
   - 選擇"端口"
   - 點擊"下一步"

4. **協議和端口**
   - 選擇"TCP"
   - 選擇"特定本地端口"
   - 輸入端口號：`8080`
   - 點擊"下一步"

5. **操作**
   - 選擇"允許連接"
   - 點擊"下一步"

6. **配置文件**
   - 勾選"域"、"專用"、"公用"
   - 點擊"下一步"

7. **名稱和描述**
   - 名稱：`游泳系統Web服務器`
   - 描述：`允許外部用戶訪問游泳系統Web界面`
   - 點擊"完成"

### 方法2：使用命令行（管理員權限）

```cmd
# 允許8080端口的入站連接
netsh advfirewall firewall add rule name="游泳系統Web服務器" dir=in action=allow protocol=TCP localport=8080

# 允許8080端口的出站連接
netsh advfirewall firewall add rule name="游泳系統Web服務器" dir=out action=allow protocol=TCP localport=8080
```

## 🌐 路由器端口轉發配置

### 步驟1：獲取本地IP地址
```cmd
ipconfig
```
找到您的本地IP地址（通常是192.168.x.x格式）

### 步驟2：登入路由器管理界面
- 在瀏覽器中輸入路由器IP地址
- 通常是：`192.168.1.1` 或 `192.168.0.1`
- 輸入管理員用戶名和密碼

### 步驟3：配置端口轉發
1. 找到"端口轉發"或"Port Forwarding"選項
2. 添加新規則：
   - **服務名稱**: 游泳系統Web
   - **外部端口**: 8080
   - **內部IP地址**: 您的本地IP地址
   - **內部端口**: 8080
   - **協議**: TCP
   - **啟用**: 是

### 步驟4：保存設置
- 點擊"保存"或"應用"
- 等待路由器重啟

## 🧪 測試配置

### 本地測試
```cmd
# 測試本地8080端口
curl http://localhost:8080
```

### 公網測試
```cmd
# 測試公網IP的8080端口
curl http://您的公網IP:8080
```

## 🔍 常見問題

### Q: 外部用戶無法訪問怎麼辦？
A: 檢查以下項目：
1. Windows防火牆是否開放8080端口
2. 路由器是否配置端口轉發
3. 服務器是否正常運行
4. 公網IP是否正確

### Q: 如何獲取公網IP？
A: 訪問以下網站：
- https://whatismyipaddress.com/
- https://ipinfo.io/

### Q: 端口8080被佔用怎麼辦？
A: 可以修改為其他端口：
1. 修改 `server.js` 中的 `FORCE_PORT` 值
2. 同時修改防火牆和路由器配置

## 📋 完整配置檢查清單

- [ ] Windows防火牆開放8080端口
- [ ] 路由器配置8080端口轉發
- [ ] Web服務器在8080端口運行
- [ ] API服務器在3001端口運行
- [ ] 本地測試通過
- [ ] 公網測試通過

---

**注意**: 配置完成後，外部用戶可以通過 `http://您的公網IP:8080` 訪問您的游泳系統 