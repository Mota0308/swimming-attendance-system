<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>新功能測試頁面</title>
    <link rel="stylesheet" href="scheduler-light-theme.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #f5f5f5;
            margin: 0;
            padding: 20px;
        }
        .test-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
        }
        .test-header {
            text-align: center;
            margin-bottom: 32px;
            padding-bottom: 16px;
            border-bottom: 2px solid #f1f3f4;
        }
        .test-header h1 {
            color: #1a73e8;
            margin: 0;
        }
        .test-section {
            margin-bottom: 32px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
            border: 1px solid #e8eaed;
        }
        .test-section h3 {
            color: #202124;
            margin-top: 0;
        }
        .test-button {
            background: #1a73e8;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            transition: all 0.2s ease;
        }
        .test-button:hover {
            background: #1557b0;
            transform: translateY(-1px);
        }
        .status {
            margin-top: 16px;
            padding: 12px;
            border-radius: 6px;
            font-weight: 500;
        }
        .status.success {
            background: #e6f4ea;
            color: #137333;
            border: 1px solid #34a853;
        }
        .status.error {
            background: #fce8e6;
            color: #c5221f;
            border: 1px solid #ea4335;
        }
        .status.info {
            background: #e8f0fe;
            color: #174ea6;
            border: 1px solid #4285f4;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <div class="test-header">
            <h1><i class="fas fa-test-tube"></i> 新功能測試頁面</h1>
            <p>測試淺色主題和新增學生功能</p>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-palette"></i> 淺色主題測試</h3>
            <p>點擊下面的按鈕來測試課程編排系統的淺色主題：</p>
            <button class="test-button" onclick="testSchedulerTheme()">
                <i class="fas fa-calendar-alt"></i> 測試課程編排系統
            </button>
            <div id="themeStatus"></div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-user-plus"></i> 新增學生功能測試</h3>
            <p>點擊下面的按鈕來測試新增學生對話框：</p>
            <button class="test-button" onclick="testAddStudentDialog()">
                <i class="fas fa-user-plus"></i> 測試新增學生對話框
            </button>
            <div id="addStudentStatus"></div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-eye"></i> 學生卡片顯示測試</h3>
            <p>點擊下面的按鈕來測試學生卡片的簡潔顯示：</p>
            <button class="test-button" onclick="testStudentCards()">
                <i class="fas fa-users"></i> 測試學生卡片
            </button>
            <div id="studentCardsStatus"></div>
        </div>

        <div class="test-section">
            <h3><i class="fas fa-link"></i> 部署狀態檢查</h3>
            <p>檢查當前部署的狀態：</p>
            <button class="test-button" onclick="checkDeploymentStatus()">
                <i class="fas fa-check-circle"></i> 檢查部署狀態
            </button>
            <div id="deploymentStatus"></div>
        </div>
    </div>

    <script src="scheduler-light.js"></script>
    <script>
        function showStatus(elementId, message, type = 'info') {
            const element = document.getElementById(elementId);
            element.innerHTML = `<div class="status ${type}">${message}</div>`;
        }

        function testSchedulerTheme() {
            try {
                // 檢查淺色主題CSS是否已加載
                const styles = getComputedStyle(document.body);
                const testElement = document.createElement('div');
                testElement.className = 'scheduler-light-container';
                document.body.appendChild(testElement);
                
                const computedStyles = getComputedStyle(testElement);
                const hasLightTheme = computedStyles.backgroundColor === 'rgb(255, 255, 255)' || 
                                    computedStyles.backgroundColor === '#ffffff';
                
                document.body.removeChild(testElement);
                
                if (hasLightTheme) {
                    showStatus('themeStatus', '✅ 淺色主題CSS已成功加載！', 'success');
                } else {
                    showStatus('themeStatus', '⚠️ 淺色主題CSS可能未正確加載', 'error');
                }
            } catch (error) {
                showStatus('themeStatus', `❌ 測試淺色主題時發生錯誤: ${error.message}`, 'error');
            }
        }

        function testAddStudentDialog() {
            try {
                if (typeof showAddStudentDialog === 'function') {
                    showAddStudentDialog();
                    showStatus('addStudentStatus', '✅ 新增學生對話框功能正常！', 'success');
                } else {
                    showStatus('addStudentStatus', '❌ 新增學生對話框函數未找到', 'error');
                }
            } catch (error) {
                showStatus('addStudentStatus', `❌ 測試新增學生對話框時發生錯誤: ${error.message}`, 'error');
            }
        }

        function testStudentCards() {
            try {
                if (typeof createStudentCard === 'function') {
                    // 創建測試學生數據
                    const testStudent = {
                        id: 'test-123',
                        name: '測試學生',
                        phone: '12345678',
                        age: '10',
                        type: '一般課程',
                        time: '逢星期日 11:00-13:00',
                        location: '荔枝角公園游泳池',
                        notes: '這是一個測試學生'
                    };
                    
                    const testCard = createStudentCard(testStudent, 'test-slot');
                    document.body.appendChild(testCard);
                    
                    // 檢查卡片是否包含必要元素
                    const hasName = testCard.querySelector('.student-name');
                    const hasNotes = testCard.querySelector('.student-notes');
                    const hasActions = testCard.querySelector('.student-actions');
                    
                    if (hasName && hasActions) {
                        showStatus('studentCardsStatus', '✅ 學生卡片創建成功，簡潔顯示正常！', 'success');
                    } else {
                        showStatus('studentCardsStatus', '⚠️ 學生卡片可能未正確創建', 'error');
                    }
                    
                    // 清理測試元素
                    setTimeout(() => {
                        if (document.body.contains(testCard)) {
                            document.body.removeChild(testCard);
                        }
                    }, 3000);
                } else {
                    showStatus('studentCardsStatus', '❌ 學生卡片創建函數未找到', 'error');
                }
            } catch (error) {
                showStatus('studentCardsStatus', `❌ 測試學生卡片時發生錯誤: ${error.message}`, 'error');
            }
        }

        function checkDeploymentStatus() {
            try {
                // 檢查關鍵文件是否存在
                const requiredFiles = [
                    'scheduler-light-theme.css',
                    'scheduler-light.js',
                    'attendance-board-light.css',
                    'attendance-board-light.js'
                ];
                
                let allFilesExist = true;
                const missingFiles = [];
                
                requiredFiles.forEach(file => {
                    const link = document.createElement('link');
                    link.rel = 'stylesheet';
                    link.href = file;
                    document.head.appendChild(link);
                    
                    // 簡單檢查文件是否存在
                    fetch(file, { method: 'HEAD' })
                        .then(response => {
                            if (!response.ok) {
                                allFilesExist = false;
                                missingFiles.push(file);
                            }
                        })
                        .catch(() => {
                            allFilesExist = false;
                            missingFiles.push(file);
                        });
                });
                
                setTimeout(() => {
                    if (allFilesExist) {
                        showStatus('deploymentStatus', '✅ 所有必要文件都已部署！', 'success');
                    } else {
                        showStatus('deploymentStatus', `⚠️ 以下文件可能未正確部署: ${missingFiles.join(', ')}`, 'error');
                    }
                }, 2000);
                
            } catch (error) {
                showStatus('deploymentStatus', `❌ 檢查部署狀態時發生錯誤: ${error.message}`, 'error');
            }
        }

        // 頁面加載完成後自動檢查
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                checkDeploymentStatus();
            }, 1000);
        });
    </script>
</body>
</html> 