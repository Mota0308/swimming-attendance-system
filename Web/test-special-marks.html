<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰¹æ®Šæ¨™è¨˜åŠŸèƒ½æ¸¬è©¦</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 5px;
        }
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #5a6fd8;
        }
        .result-area {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ ç‰¹æ®Šæ¨™è¨˜åŠŸèƒ½æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h3>ğŸ“ æ¸¬è©¦æ•¸æ“šè™•ç†</h3>
            <p>æ¸¬è©¦å­¸ç”Ÿæ•¸æ“šä¸­çš„ç‰¹æ®Šæ¨™è¨˜è­˜åˆ¥åŠŸèƒ½</p>
            <button class="test-button" onclick="testMarkProcessing()">æ¸¬è©¦æ¨™è¨˜è™•ç†</button>
            <div id="markTestResult" class="result-area"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ‘¥ æ¸¬è©¦å­¸ç”Ÿé¡¯ç¤º</h3>
            <p>æ¸¬è©¦å¸¶æœ‰ç‰¹æ®Šæ¨™è¨˜çš„å­¸ç”Ÿå§“åé¡¯ç¤º</p>
            <button class="test-button" onclick="testStudentDisplay()">æ¸¬è©¦å­¸ç”Ÿé¡¯ç¤º</button>
            <div id="studentDisplayResult" class="result-area"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ’¾ æ¸¬è©¦æ•¸æ“šä¿å­˜</h3>
            <p>æ¸¬è©¦å­¸ç”Ÿæ•¸æ“šä¿å­˜å’Œç‰¹æ®Šæ¨™è¨˜æ›´æ–°</p>
            <button class="test-button" onclick="testDataSaving()">æ¸¬è©¦æ•¸æ“šä¿å­˜</button>
            <div id="saveTestResult" class="result-area"></div>
        </div>
    </div>

    <script>
        // æ¸¬è©¦æ¨™è¨˜è™•ç†åŠŸèƒ½
        function testMarkProcessing() {
            const testData = [
                {
                    name: 'æ¸¬è©¦å­¸ç”Ÿ1',
                    'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥ğŸˆ, 7æœˆ20æ—¥, 7æœˆ27æ—¥',
                    'originalDates': ['7æœˆ13æ—¥ğŸˆ', '7æœˆ20æ—¥', '7æœˆ27æ—¥']
                },
                {
                    name: 'æ¸¬è©¦å­¸ç”Ÿ2',
                    'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥, 7æœˆ20æ—¥ğŸŒŸ, 7æœˆ27æ—¥',
                    'originalDates': ['7æœˆ13æ—¥', '7æœˆ20æ—¥ğŸŒŸ', '7æœˆ27æ—¥']
                },
                {
                    name: 'æ¸¬è©¦å­¸ç”Ÿ3',
                    'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥ğŸˆ, 7æœˆ20æ—¥ğŸŒŸ, 7æœˆ27æ—¥',
                    'originalDates': ['7æœˆ13æ—¥ğŸˆ', '7æœˆ20æ—¥ğŸŒŸ', '7æœˆ27æ—¥']
                }
            ];
            
            // æ¨¡æ“¬æ¨™è¨˜è™•ç†
            const processedData = testData.map(student => {
                const hasBalloonMark = checkForSpecialMark(student, 'ğŸˆ');
                const hasStarMark = checkForSpecialMark(student, 'ğŸŒŸ');
                
                return {
                    ...student,
                    hasBalloonMark: hasBalloonMark,
                    hasStarMark: hasStarMark
                };
            });
            
            document.getElementById('markTestResult').innerHTML = `
                <h4>è™•ç†çµæœï¼š</h4>
                <pre>${JSON.stringify(processedData, null, 2)}</pre>
            `;
        }
        
        // æ¸¬è©¦å­¸ç”Ÿé¡¯ç¤ºåŠŸèƒ½
        function testStudentDisplay() {
            const testStudents = [
                { name: 'å¼µå°æ˜', hasStarMark: false, hasBalloonMark: false },
                { name: 'æå°è¯', hasStarMark: true, hasBalloonMark: false },
                { name: 'ç‹å°ç¾', hasStarMark: false, hasBalloonMark: true },
                { name: 'è¶™å°å¼·', hasStarMark: true, hasBalloonMark: true }
            ];
            
            let displayHTML = '<h4>å­¸ç”Ÿé¡¯ç¤ºçµæœï¼š</h4>';
            testStudents.forEach(student => {
                const nameWithMarks = getStudentNameWithMarks(student.name, student.hasStarMark, student.hasBalloonMark);
                displayHTML += `<div style="margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    ${nameWithMarks}
                </div>`;
            });
            
            document.getElementById('studentDisplayResult').innerHTML = displayHTML;
        }
        
        // æ¸¬è©¦æ•¸æ“šä¿å­˜åŠŸèƒ½
        function testDataSaving() {
            const testStudent = {
                name: 'æ¸¬è©¦ä¿å­˜å­¸ç”Ÿ',
                'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥ğŸˆ, 7æœˆ20æ—¥ğŸŒŸ, 7æœˆ27æ—¥',
                'originalDates': ['7æœˆ13æ—¥ğŸˆ', '7æœˆ20æ—¥ğŸŒŸ', '7æœˆ27æ—¥']
            };
            
            const processedData = processStudentMarks(testStudent);
            
            document.getElementById('saveTestResult').innerHTML = `
                <h4>ä¿å­˜æ•¸æ“šçµæœï¼š</h4>
                <p><strong>åŸå§‹æ•¸æ“šï¼š</strong></p>
                <pre>${JSON.stringify(testStudent, null, 2)}</pre>
                <p><strong>è™•ç†å¾Œæ•¸æ“šï¼š</strong></p>
                <pre>${JSON.stringify(processedData, null, 2)}</pre>
            `;
        }
        
        // è¼”åŠ©å‡½æ•¸
        function checkForSpecialMark(student, mark) {
            const fieldsToCheck = ['ä¸Šèª²æ—¥æœŸ', 'ä¸Šèª²', 'æ—¥æœŸ', 'time', 'classDates', 'originalDates'];
            
            for (const field of fieldsToCheck) {
                if (student[field]) {
                    const value = String(student[field]);
                    if (value.includes(mark)) {
                        return true;
                    }
                }
            }
            
            if (student.originalDates && Array.isArray(student.originalDates)) {
                for (const date of student.originalDates) {
                    if (String(date).includes(mark)) {
                        return true;
                    }
                }
            }
            
            return false;
        }
        
        function processStudentMarks(studentData) {
            if (!studentData) return studentData;
            
            const hasBalloonMark = checkForSpecialMark(studentData, 'ğŸˆ');
            const hasStarMark = checkForSpecialMark(studentData, 'ğŸŒŸ');
            
            return {
                ...studentData,
                hasBalloonMark: hasBalloonMark,
                hasStarMark: hasStarMark
            };
        }
        
        function getStudentNameWithMarks(studentName, hasStar, hasBalloon) {
            let marks = '';
            
            if (hasStar) {
                marks += `<span class="student-mark star mark-tooltip" data-tooltip="é‡é»å­¸ç”Ÿ">ğŸŒŸ</span>`;
            }
            
            if (hasBalloon) {
                marks += `<span class="student-mark balloon mark-tooltip" data-tooltip="æ°£çƒæ¨™è¨˜">ğŸˆ</span>`;
            }
            
            if (marks) {
                return `<div class="student-name-with-marks"><span>${studentName}</span>${marks}</div>`;
            } else {
                return studentName;
            }
        }
    </script>
</body>
</html> 
 
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç‰¹æ®Šæ¨™è¨˜åŠŸèƒ½æ¸¬è©¦</title>
    <link rel="stylesheet" href="styles.css">
    <style>
        .test-container {
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #e1e5e9;
            border-radius: 5px;
        }
        .test-button {
            background: #667eea;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        .test-button:hover {
            background: #5a6fd8;
        }
        .result-area {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 15px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ¯ ç‰¹æ®Šæ¨™è¨˜åŠŸèƒ½æ¸¬è©¦</h1>
        
        <div class="test-section">
            <h3>ğŸ“ æ¸¬è©¦æ•¸æ“šè™•ç†</h3>
            <p>æ¸¬è©¦å­¸ç”Ÿæ•¸æ“šä¸­çš„ç‰¹æ®Šæ¨™è¨˜è­˜åˆ¥åŠŸèƒ½</p>
            <button class="test-button" onclick="testMarkProcessing()">æ¸¬è©¦æ¨™è¨˜è™•ç†</button>
            <div id="markTestResult" class="result-area"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ‘¥ æ¸¬è©¦å­¸ç”Ÿé¡¯ç¤º</h3>
            <p>æ¸¬è©¦å¸¶æœ‰ç‰¹æ®Šæ¨™è¨˜çš„å­¸ç”Ÿå§“åé¡¯ç¤º</p>
            <button class="test-button" onclick="testStudentDisplay()">æ¸¬è©¦å­¸ç”Ÿé¡¯ç¤º</button>
            <div id="studentDisplayResult" class="result-area"></div>
        </div>
        
        <div class="test-section">
            <h3>ğŸ’¾ æ¸¬è©¦æ•¸æ“šä¿å­˜</h3>
            <p>æ¸¬è©¦å­¸ç”Ÿæ•¸æ“šä¿å­˜å’Œç‰¹æ®Šæ¨™è¨˜æ›´æ–°</p>
            <button class="test-button" onclick="testDataSaving()">æ¸¬è©¦æ•¸æ“šä¿å­˜</button>
            <div id="saveTestResult" class="result-area"></div>
        </div>
    </div>

    <script>
        // æ¸¬è©¦æ¨™è¨˜è™•ç†åŠŸèƒ½
        function testMarkProcessing() {
            const testData = [
                {
                    name: 'æ¸¬è©¦å­¸ç”Ÿ1',
                    'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥ğŸˆ, 7æœˆ20æ—¥, 7æœˆ27æ—¥',
                    'originalDates': ['7æœˆ13æ—¥ğŸˆ', '7æœˆ20æ—¥', '7æœˆ27æ—¥']
                },
                {
                    name: 'æ¸¬è©¦å­¸ç”Ÿ2',
                    'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥, 7æœˆ20æ—¥ğŸŒŸ, 7æœˆ27æ—¥',
                    'originalDates': ['7æœˆ13æ—¥', '7æœˆ20æ—¥ğŸŒŸ', '7æœˆ27æ—¥']
                },
                {
                    name: 'æ¸¬è©¦å­¸ç”Ÿ3',
                    'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥ğŸˆ, 7æœˆ20æ—¥ğŸŒŸ, 7æœˆ27æ—¥',
                    'originalDates': ['7æœˆ13æ—¥ğŸˆ', '7æœˆ20æ—¥ğŸŒŸ', '7æœˆ27æ—¥']
                }
            ];
            
            // æ¨¡æ“¬æ¨™è¨˜è™•ç†
            const processedData = testData.map(student => {
                const hasBalloonMark = checkForSpecialMark(student, 'ğŸˆ');
                const hasStarMark = checkForSpecialMark(student, 'ğŸŒŸ');
                
                return {
                    ...student,
                    hasBalloonMark: hasBalloonMark,
                    hasStarMark: hasStarMark
                };
            });
            
            document.getElementById('markTestResult').innerHTML = `
                <h4>è™•ç†çµæœï¼š</h4>
                <pre>${JSON.stringify(processedData, null, 2)}</pre>
            `;
        }
        
        // æ¸¬è©¦å­¸ç”Ÿé¡¯ç¤ºåŠŸèƒ½
        function testStudentDisplay() {
            const testStudents = [
                { name: 'å¼µå°æ˜', hasStarMark: false, hasBalloonMark: false },
                { name: 'æå°è¯', hasStarMark: true, hasBalloonMark: false },
                { name: 'ç‹å°ç¾', hasStarMark: false, hasBalloonMark: true },
                { name: 'è¶™å°å¼·', hasStarMark: true, hasBalloonMark: true }
            ];
            
            let displayHTML = '<h4>å­¸ç”Ÿé¡¯ç¤ºçµæœï¼š</h4>';
            testStudents.forEach(student => {
                const nameWithMarks = getStudentNameWithMarks(student.name, student.hasStarMark, student.hasBalloonMark);
                displayHTML += `<div style="margin: 10px 0; padding: 10px; border: 1px solid #ddd; border-radius: 5px;">
                    ${nameWithMarks}
                </div>`;
            });
            
            document.getElementById('studentDisplayResult').innerHTML = displayHTML;
        }
        
        // æ¸¬è©¦æ•¸æ“šä¿å­˜åŠŸèƒ½
        function testDataSaving() {
            const testStudent = {
                name: 'æ¸¬è©¦ä¿å­˜å­¸ç”Ÿ',
                'ä¸Šèª²æ—¥æœŸ': '7æœˆ13æ—¥ğŸˆ, 7æœˆ20æ—¥ğŸŒŸ, 7æœˆ27æ—¥',
                'originalDates': ['7æœˆ13æ—¥ğŸˆ', '7æœˆ20æ—¥ğŸŒŸ', '7æœˆ27æ—¥']
            };
            
            const processedData = processStudentMarks(testStudent);
            
            document.getElementById('saveTestResult').innerHTML = `
                <h4>ä¿å­˜æ•¸æ“šçµæœï¼š</h4>
                <p><strong>åŸå§‹æ•¸æ“šï¼š</strong></p>
                <pre>${JSON.stringify(testStudent, null, 2)}</pre>
                <p><strong>è™•ç†å¾Œæ•¸æ“šï¼š</strong></p>
                <pre>${JSON.stringify(processedData, null, 2)}</pre>
            `;
        }
        
        // è¼”åŠ©å‡½æ•¸
        function checkForSpecialMark(student, mark) {
            const fieldsToCheck = ['ä¸Šèª²æ—¥æœŸ', 'ä¸Šèª²', 'æ—¥æœŸ', 'time', 'classDates', 'originalDates'];
            
            for (const field of fieldsToCheck) {
                if (student[field]) {
                    const value = String(student[field]);
                    if (value.includes(mark)) {
                        return true;
                    }
                }
            }
            
            if (student.originalDates && Array.isArray(student.originalDates)) {
                for (const date of student.originalDates) {
                    if (String(date).includes(mark)) {
                        return true;
                    }
                }
            }
            
            return false;
        }
        
        function processStudentMarks(studentData) {
            if (!studentData) return studentData;
            
            const hasBalloonMark = checkForSpecialMark(studentData, 'ğŸˆ');
            const hasStarMark = checkForSpecialMark(studentData, 'ğŸŒŸ');
            
            return {
                ...studentData,
                hasBalloonMark: hasBalloonMark,
                hasStarMark: hasStarMark
            };
        }
        
        function getStudentNameWithMarks(studentName, hasStar, hasBalloon) {
            let marks = '';
            
            if (hasStar) {
                marks += `<span class="student-mark star mark-tooltip" data-tooltip="é‡é»å­¸ç”Ÿ">ğŸŒŸ</span>`;
            }
            
            if (hasBalloon) {
                marks += `<span class="student-mark balloon mark-tooltip" data-tooltip="æ°£çƒæ¨™è¨˜">ğŸˆ</span>`;
            }
            
            if (marks) {
                return `<div class="student-name-with-marks"><span>${studentName}</span>${marks}</div>`;
            } else {
                return studentName;
            }
        }
    </script>
</body>
</html> 